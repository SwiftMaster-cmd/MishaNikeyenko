/* /css/links.css  --  tidy *list-view* sidebar (June 2025)
   • vertical column in #side-nav
   • collapsible category headers with ► / ▼
   • minimal card-less "list" styling
   • keeps add-form + modal working
   ---------------------------------------------------------- */

@import url('variables.css');   /* design tokens: colors, radius, --nav-h */

.hidden{display:none!important}

/*──────── SIDEBAR SHELL ───────*/
.side-nav{
  position:fixed;
  top:var(--nav-h);
  left:0;
  width:260px;
  height:calc(100% - var(--nav-h));
  background:var(--clr-glass);
  border-right:1px solid var(--clr-border);
  backdrop-filter:blur(18px) saturate(1.3);
  transform:translateX(-100%);                /* closed by default */
  transition:transform .3s ease;
  display:flex;
  flex-direction:column;
}
.side-nav.open{transform:none}

/* push main content when sidebar is open */
body.sidebar-open .main-card{margin-left:260px}

/*──────── SCROLLABLE LINK COLUMN ───────*/
.nav-links{
  flex:1;
  overflow-y:auto;
  padding:1.4rem 1rem;
  display:flex;
  flex-direction:column;
  gap:1.4rem;
}
.nav-links-group{
  display:flex;
  flex-direction:column;
  gap:.7rem;
}

/*──────── CATEGORY HEADER ──────*/
.category-title{
  display:flex;
  align-items:center;
  gap:.55rem;
  user-select:none;
}
.cat-toggle{
  border:none;
  background:transparent;
  color:var(--clr-muted);
  font-size:.85rem;            /* triangle button */
  transform:rotate(90deg);
  transition:transform .2s;
  cursor:pointer;
}
.cat-toggle[aria-expanded="false"]{transform:rotate(0deg)}
.cat-name{
  font-size:.96rem;
  font-weight:600;
  margin-right:auto;
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
}
.cat-actions{display:flex;gap:.4rem}
button.ghost{
  border:none;background:transparent;color:var(--clr-muted);
  font-size:1rem;padding:.2rem;border-radius:8px;cursor:pointer;
}
button.ghost:hover{
  background:rgba(255,255,255,.12);
  color:var(--clr-text);
}

/*──────── LINK ROW (list item) ──────*/
.link-row{position:relative}
.link-main{
  width:100%;
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:.78rem .9rem;
  background:rgba(255,255,255,.08);
  border:none;                       /* list, not card */
  border-radius:10px;
  color:var(--clr-text);
  font-size:.92rem;
  cursor:pointer;
  transition:background .25s;
}
.link-main:hover{background:rgba(255,255,255,.15)}
.link-main .title{
  flex:1;
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
}
.menu-btn{
  margin-left:.8rem;
  color:var(--clr-muted);
  opacity:0;
  transition:opacity .18s;
}
.link-main:hover .menu-btn{opacity:1}

/*──────── DROPDOWN MENU ────────*/
.menu{
  position:absolute;
  right:0;
  top:calc(100% + .3rem);
  min-width:220px;
  padding:.8rem;
  background:var(--clr-card);
  border:1px solid var(--clr-border);
  border-radius:var(--radius);
  display:flex;
  flex-direction:column;
  gap:.6rem;
  z-index:900;
}
.menu[hidden]{display:none!important}
.menu button{
  background:var(--clr-primary);
  color:#fff;
  border:none;
  border-radius:10px;
  padding:.55rem .9rem;
  font-size:.9rem;
  font-weight:600;
  cursor:pointer;
}
.menu-edit{background:#5b2ee5}
.menu-delete{background:#d32f2f}
.preview{
  word-break:break-all;
  font-size:.8rem;
  color:var(--clr-muted);
  margin-top:.4rem;
}

/*──────── ADD-FORM (still in <main>) ─────*/
#add-link-form{
  margin:2rem auto;
  max-width:480px;
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(200px,1fr)) 90px;
  gap:1rem;
  overflow:hidden;
}
#add-link-form.collapsed{max-height:0;opacity:0;pointer-events:none}
#add-link-form input,#add-link-form select{
  padding:.85rem 1rem;
  background:rgba(255,255,255,.06);
  border:1px solid var(--clr-border);
  border-radius:12px;
  color:var(--clr-text);
}

/*──────── EDIT MODAL ───────────*/
#edit-overlay{
  position:fixed;inset:0;
  background:#0009;
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:9999;
}
#edit-dialog{
  width:clamp(300px,90vw,420px);
  background:var(--clr-card);
  border:1px solid var(--clr-border);
  border-radius:18px;
  padding:2rem;
  display:flex;
  flex-direction:column;
  gap:1rem;
}
#edit-dialog input,#edit-dialog select{
  padding:.75rem 1rem;
  background:rgba(255,255,255,.06);
  border:1px solid var(--clr-border);
  border-radius:12px;
  color:var(--clr-text);
}
.actions{
  display:flex;
  gap:1rem;
  justify-content:flex-end;
}
#edit-save{
  background:var(--clr-primary);
  color:#fff;border:none;border-radius:12px;
  flex:1;padding:.7rem 0;
}
#edit-cancel{
  background:rgba(255,255,255,.18);
  color:var(--clr-text);
  border:none;border-radius:12px;
  flex:1;padding:.7rem 0;
}

/* lock scroll + clicks behind modal */
body.modal-open{overflow:hidden}
body.modal-open .side-nav,
body.modal-open .header-bar,
body.modal-open .main-card{
  pointer-events:none;
}