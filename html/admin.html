<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>OSL Admin Dashboard</title>

  <!-- Mobile viewport -->
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#0f1117" />
  <meta name="color-scheme" content="dark light" />

  <link rel="stylesheet" href="../css/dashboard.css" />
    <link rel="stylesheet" href="../css/gi.css" />
  
                 
 
</head>
<body>
  <div class="admin-header">
    <h2>OSL Admin Dashboard</h2>
    <div style="display: flex; gap: 12px;">
      <button id="guestFormBtn" onclick="location.href='../guestform.html'">Guest Form</button>
      <button id="reviewFormBtn" onclick="location.href='../review.html'">Review Form</button>
      <button id="messagesBtn" class="admin-msg-btn">
        Messages
        <span id="messagesBadge" class="msg-badge"></span>
      </button>
      <button id="logoutBtn">Logout</button>
    </div>
  </div>

  <div id="adminApp" class="admin-app-container"></div>
  <div id="messagesModalRoot"></div>

  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>

  <!-- Core init FIRST -->
  <script src="./js/admin/admin.js"></script>

  <!-- Other modules -->
  <script src="../js/admin/users.js"></script>
  <script src="../js/admin/reviews.js"></script>
  <script src="../js/admin/stores.js"></script>

  <!-- GuestInfo â€“ now ES modules -->
  <script type="module" src="../js/admin/gi/gi-container.js"></script>
  <script type="module">
    import { initGuestinfo } from '../js/admin/gi/gi-container.js';
    // once Firebase and your core admin.js have set up window.db, uid & role:
    window.addEventListener('DOMContentLoaded', () => {
      initGuestinfo();
      // dashboard.js will call window.renderAdminApp();
      // if you need an initial render right away:
      if (typeof window.renderAdminApp === 'function') {
        window.renderAdminApp();
      }
    });
  </script>
  <!-- 1) Firebase SDKs -->
  
  <!-- 2) Questions definition & real-time sync -->
  <script src="../js/gp/gp-questions.js"></script>

  <!-- 3) Core scoring (also bootstraps Firebase) -->
  <script src="../js/gp/gp-core.js"></script>

  <!-- 4) UI skeleton (injects #adminPanelPlaceholder and forms) -->
  <script src="../js/gp/gp-ui-render.js"></script>

  <!-- 5) Admin UI (reads gpQuestions & injects panel into the placeholder) -->
  <script src="../js/gp/gp-admin-questions-ui.js"></script>

  <!-- 6) App logic (auth gating, load/save guestinfo, progress) -->
  <script src="../js/gp/gp-app-min.js"></script>
</body>
</html>